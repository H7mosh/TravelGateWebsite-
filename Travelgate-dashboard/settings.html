<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Settings - TravelGate Admin</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.min.css">
    <link rel="stylesheet" href="css/admin.css">
</head>
<body>
    <div class="dashboard-wrapper">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <h3><i class="bi bi-airplane"></i> TravelGate</h3>
                <p class="text-muted small">Admin Dashboard</p>
            </div>
            <nav class="sidebar-nav">
                <a href="index.html" class="nav-item">
                    <i class="bi bi-speedometer2"></i> Dashboard
                </a>
                <a href="reservations.html" class="nav-item">
                    <i class="bi bi-calendar-check"></i> Reservations
                </a>
                <a href="hotels.html" class="nav-item">
                    <i class="bi bi-building"></i> Hotels
                </a>
                <a href="packages.html" class="nav-item">
                    <i class="bi bi-box-seam-fill"></i> Packages
                </a>
                <a href="groups.html" class="nav-item">
                    <i class="bi bi-people"></i> Group Tours
                </a>
                <a href="group-programs.html" class="nav-item">
                    <i class="bi bi-calendar-event"></i> Group Programs
                </a>
                <a href="transfers.html" class="nav-item">
                    <i class="bi bi-car-front"></i> Transfers
                </a>
                <a href="flights.html" class="nav-item">
                    <i class="bi bi-airplane-fill"></i> Flight Packages
                </a>
                <a href="settings.html" class="nav-item active">
                    <i class="bi bi-gear"></i> Settings
                </a>
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <header class="content-header">
                <h1>Settings</h1>
            </header>

            <!-- Daily Reservation Limit -->
            <div class="content-section">
                <div class="section-header">
                    <h2>Daily Reservation Limit</h2>
                </div>
                <div class="row">
                    <div class="col-md-8">
                        <div class="mb-4">
                            <label class="form-label">Current Limit</label>
                            <div class="input-group">
                                <input type="number" class="form-control" id="dailyLimitInput" step="1000" min="0">
                                <span class="input-group-text">IQD</span>
                                <button class="btn btn-primary" onclick="updateDailyLimit()">
                                    <i class="bi bi-save"></i> Update Limit
                                </button>
                            </div>
                            <small class="text-muted">Set the maximum total amount (in IQD) that can be reserved in a single day.</small>
                        </div>
                        
                        <div class="mb-4">
                            <h5>Today's Status</h5>
                            <div class="card">
                                <div class="card-body">
                                    <div class="d-flex justify-content-between align-items-center mb-3">
                                        <span>Today's Total Reservations:</span>
                                        <strong id="todayTotal">-</strong>
                                    </div>
                                    <div class="d-flex justify-content-between align-items-center mb-3">
                                        <span>Remaining Capacity:</span>
                                        <strong id="remainingCapacity">-</strong>
                                    </div>
                                    <div class="progress mb-2" style="height: 25px;">
                                        <div class="progress-bar" id="limitProgressBar" role="progressbar" style="width: 0%">
                                            <span id="limitPercentage">0%</span>
                                        </div>
                                    </div>
                                    <small class="text-muted" id="limitStatusText">Loading...</small>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Reservations Control -->
            <div class="content-section">
                <div class="section-header">
                    <h2>Reservations Control</h2>
                    <p class="text-muted small">Enable or disable specific reservation types. When disabled, customers cannot create new reservations of that type.</p>
                </div>
                <div class="row">
                    <div class="col-md-10">
                        <!-- Hotel Reservations -->
                        <div class="card mb-3">
                            <div class="card-body">
                                <div class="d-flex justify-content-between align-items-center">
                                    <div>
                                        <h5 class="mb-1"><i class="bi bi-building me-2"></i>Hotel Reservations</h5>
                                        <p class="text-muted mb-0 small">Control hotel room reservations</p>
                                    </div>
                                    <div class="form-check form-switch">
                                        <input class="form-check-input reservation-type-toggle" type="checkbox" 
                                               id="reservationsEnabledToggle_Hotel" 
                                               data-type="Hotel"
                                               style="width: 3rem; height: 1.5rem; cursor: pointer;"
                                               onchange="toggleReservationType('Hotel')">
                                    </div>
                                </div>
                                <div class="mt-2">
                                    <small class="text-muted" id="reservationsStatusText_Hotel">Loading...</small>
                                </div>
                            </div>
                        </div>

                        <!-- Group Reservations -->
                        <div class="card mb-3">
                            <div class="card-body">
                                <div class="d-flex justify-content-between align-items-center">
                                    <div>
                                        <h5 class="mb-1"><i class="bi bi-people me-2"></i>Group Tour Reservations</h5>
                                        <p class="text-muted mb-0 small">Control group tour reservations</p>
                                    </div>
                                    <div class="form-check form-switch">
                                        <input class="form-check-input reservation-type-toggle" type="checkbox" 
                                               id="reservationsEnabledToggle_Group" 
                                               data-type="Group"
                                               style="width: 3rem; height: 1.5rem; cursor: pointer;"
                                               onchange="toggleReservationType('Group')">
                                    </div>
                                </div>
                                <div class="mt-2">
                                    <small class="text-muted" id="reservationsStatusText_Group">Loading...</small>
                                </div>
                            </div>
                        </div>

                        <!-- Transfer Reservations -->
                        <div class="card mb-3">
                            <div class="card-body">
                                <div class="d-flex justify-content-between align-items-center">
                                    <div>
                                        <h5 class="mb-1"><i class="bi bi-car-front me-2"></i>Transfer Reservations</h5>
                                        <p class="text-muted mb-0 small">Control airport transfer reservations</p>
                                    </div>
                                    <div class="form-check form-switch">
                                        <input class="form-check-input reservation-type-toggle" type="checkbox" 
                                               id="reservationsEnabledToggle_Transfer" 
                                               data-type="Transfer"
                                               style="width: 3rem; height: 1.5rem; cursor: pointer;"
                                               onchange="toggleReservationType('Transfer')">
                                    </div>
                                </div>
                                <div class="mt-2">
                                    <small class="text-muted" id="reservationsStatusText_Transfer">Loading...</small>
                                </div>
                            </div>
                        </div>

                        <!-- Flight Package Reservations -->
                        <div class="card mb-3">
                            <div class="card-body">
                                <div class="d-flex justify-content-between align-items-center">
                                    <div>
                                        <h5 class="mb-1"><i class="bi bi-airplane-fill me-2"></i>Flight Package Reservations</h5>
                                        <p class="text-muted mb-0 small">Control flight package reservations</p>
                                    </div>
                                    <div class="form-check form-switch">
                                        <input class="form-check-input reservation-type-toggle" type="checkbox" 
                                               id="reservationsEnabledToggle_FlightPackage" 
                                               data-type="FlightPackage"
                                               style="width: 3rem; height: 1.5rem; cursor: pointer;"
                                               onchange="toggleReservationType('FlightPackage')">
                                    </div>
                                </div>
                                <div class="mt-2">
                                    <small class="text-muted" id="reservationsStatusText_FlightPackage">Loading...</small>
                                </div>
                            </div>
                        </div>

                        <!-- Group Program Reservations -->
                        <div class="card mb-3">
                            <div class="card-body">
                                <div class="d-flex justify-content-between align-items-center">
                                    <div>
                                        <h5 class="mb-1"><i class="bi bi-calendar-event me-2"></i>Group Program Reservations</h5>
                                        <p class="text-muted mb-0 small">Control Tour and Transfer Guide group program reservations (Istanbul, Beirut, Antalya, etc.)</p>
                                    </div>
                                    <div class="form-check form-switch">
                                        <input class="form-check-input reservation-type-toggle" type="checkbox" 
                                               id="reservationsEnabledToggle_GroupProgram" 
                                               data-type="GroupProgram"
                                               style="width: 3rem; height: 1.5rem; cursor: pointer;"
                                               onchange="toggleReservationType('GroupProgram')">
                                    </div>
                                </div>
                                <div class="mt-2">
                                    <small class="text-muted" id="reservationsStatusText_GroupProgram">Loading...</small>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Section Visibility Control -->
            <div class="content-section">
                <div class="section-header">
                    <h2>Section Visibility</h2>
                    <p class="text-muted small">Show or hide sections on the frontend website. Hidden sections will not be displayed to visitors.</p>
                </div>
                <div class="row">
                    <div class="col-md-10">
                        <!-- Hotels Section -->
                        <div class="card mb-3">
                            <div class="card-body">
                                <div class="d-flex justify-content-between align-items-center">
                                    <div>
                                        <h5 class="mb-1"><i class="bi bi-building me-2"></i>Hotels Section</h5>
                                        <p class="text-muted mb-0 small">Show/hide the Hotels section on the homepage</p>
                                    </div>
                                    <div class="form-check form-switch">
                                        <input class="form-check-input section-visibility-toggle" type="checkbox" 
                                               id="sectionVisibilityToggle_Hotels" 
                                               data-section="Hotels"
                                               style="width: 3rem; height: 1.5rem; cursor: pointer;"
                                               onchange="toggleSectionVisibility('Hotels')">
                                    </div>
                                </div>
                                <div class="mt-2">
                                    <small class="text-muted" id="sectionVisibilityStatusText_Hotels">Loading...</small>
                                </div>
                            </div>
                        </div>

                        <!-- Packages Section -->
                        <div class="card mb-3">
                            <div class="card-body">
                                <div class="d-flex justify-content-between align-items-center">
                                    <div>
                                        <h5 class="mb-1"><i class="bi bi-box-seam-fill me-2"></i>Hotel Packages Section</h5>
                                        <p class="text-muted mb-0 small">Show/hide the Hotel Packages section on the homepage</p>
                                    </div>
                                    <div class="form-check form-switch">
                                        <input class="form-check-input section-visibility-toggle" type="checkbox" 
                                               id="sectionVisibilityToggle_Packages" 
                                               data-section="Packages"
                                               style="width: 3rem; height: 1.5rem; cursor: pointer;"
                                               onchange="toggleSectionVisibility('Packages')">
                                    </div>
                                </div>
                                <div class="mt-2">
                                    <small class="text-muted" id="sectionVisibilityStatusText_Packages">Loading...</small>
                                </div>
                            </div>
                        </div>

                        <!-- Groups Section -->
                        <div class="card mb-3">
                            <div class="card-body">
                                <div class="d-flex justify-content-between align-items-center">
                                    <div>
                                        <h5 class="mb-1"><i class="bi bi-people me-2"></i>Group Tours Section</h5>
                                        <p class="text-muted mb-0 small">Show/hide the Group Tours section on the homepage</p>
                                    </div>
                                    <div class="form-check form-switch">
                                        <input class="form-check-input section-visibility-toggle" type="checkbox" 
                                               id="sectionVisibilityToggle_Groups" 
                                               data-section="Groups"
                                               style="width: 3rem; height: 1.5rem; cursor: pointer;"
                                               onchange="toggleSectionVisibility('Groups')">
                                    </div>
                                </div>
                                <div class="mt-2">
                                    <small class="text-muted" id="sectionVisibilityStatusText_Groups">Loading...</small>
                                </div>
                            </div>
                        </div>

                        <!-- Group Programs Section -->
                        <div class="card mb-3">
                            <div class="card-body">
                                <div class="d-flex justify-content-between align-items-center">
                                    <div>
                                        <h5 class="mb-1"><i class="bi bi-calendar-event me-2"></i>Group Programs Section</h5>
                                        <p class="text-muted mb-0 small">Show/hide the Group Programs (Tour Programs) section on the homepage</p>
                                    </div>
                                    <div class="form-check form-switch">
                                        <input class="form-check-input section-visibility-toggle" type="checkbox" 
                                               id="sectionVisibilityToggle_GroupPrograms" 
                                               data-section="GroupPrograms"
                                               style="width: 3rem; height: 1.5rem; cursor: pointer;"
                                               onchange="toggleSectionVisibility('GroupPrograms')">
                                    </div>
                                </div>
                                <div class="mt-2">
                                    <small class="text-muted" id="sectionVisibilityStatusText_GroupPrograms">Loading...</small>
                                </div>
                            </div>
                        </div>

                        <!-- Transfers Section -->
                        <div class="card mb-3">
                            <div class="card-body">
                                <div class="d-flex justify-content-between align-items-center">
                                    <div>
                                        <h5 class="mb-1"><i class="bi bi-car-front me-2"></i>Transfers Section</h5>
                                        <p class="text-muted mb-0 small">Show/hide the Airport Transfers section on the homepage</p>
                                    </div>
                                    <div class="form-check form-switch">
                                        <input class="form-check-input section-visibility-toggle" type="checkbox" 
                                               id="sectionVisibilityToggle_Transfers" 
                                               data-section="Transfers"
                                               style="width: 3rem; height: 1.5rem; cursor: pointer;"
                                               onchange="toggleSectionVisibility('Transfers')">
                                    </div>
                                </div>
                                <div class="mt-2">
                                    <small class="text-muted" id="sectionVisibilityStatusText_Transfers">Loading...</small>
                                </div>
                            </div>
                        </div>

                        <!-- Flights Section -->
                        <div class="card mb-3">
                            <div class="card-body">
                                <div class="d-flex justify-content-between align-items-center">
                                    <div>
                                        <h5 class="mb-1"><i class="bi bi-airplane-fill me-2"></i>Flights Section</h5>
                                        <p class="text-muted mb-0 small">Show/hide the Flight Packages section on the homepage</p>
                                    </div>
                                    <div class="form-check form-switch">
                                        <input class="form-check-input section-visibility-toggle" type="checkbox" 
                                               id="sectionVisibilityToggle_Flights" 
                                               data-section="Flights"
                                               style="width: 3rem; height: 1.5rem; cursor: pointer;"
                                               onchange="toggleSectionVisibility('Flights')">
                                    </div>
                                </div>
                                <div class="mt-2">
                                    <small class="text-muted" id="sectionVisibilityStatusText_Flights">Loading...</small>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- System Information -->
            <div class="content-section">
                <div class="section-header">
                    <h2>System Information</h2>
                </div>
                <div class="row">
                    <div class="col-md-6">
                        <table class="table table-sm">
                            <tr>
                                <td><strong>API Base URL:</strong></td>
                                <td id="apiBaseUrl">-</td>
                            </tr>
                            <tr>
                                <td><strong>Database:</strong></td>
                                <td>TravelGate</td>
                            </tr>
                            <tr>
                                <td><strong>Last Updated:</strong></td>
                                <td id="lastUpdated">-</td>
                            </tr>
                        </table>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="js/api-config.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/auth-check.js"></script>
    <script src="js/dashboard.js"></script>
    <script src="js/settings.js"></script>
</body>
</html>

